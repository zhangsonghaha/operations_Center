# 运维平台（OpsCenter）前后端联调与数据库实施方案 (修正版)

根据您提供的《若依框架项目规则体系》，我将严格遵循最新的开发规范进行设计与实现。

## 1. 数据库设计 (遵循规则 8.1 & 8.2)
创建以下 4 张业务表，表名统一使用 `t_` 前缀，包含标准审计字段（`create_by`, `create_time`, `update_by`, `update_time`）和逻辑删除字段（`del_flag`，0存在/2删除）。

1.  **主机设备表 (`t_ops_host`)**
    *   `host_id` (主键)
    *   `host_name` (主机名称)
    *   `ip_address` (IP地址)
    *   `status` (状态: 0正常 1停用)
    *   `cpu_usage`, `memory_usage` (监控指标)
2.  **部署记录表 (`t_ops_deployment`)**
    *   `deployment_id` (主键)
    *   `app_name` (应用名称)
    *   `version` (版本号)
    *   `deploy_status` (状态: success/failed)
    *   `deploy_time` (发布时间)
3.  **运维告警表 (`t_ops_alert`)**
    *   `alert_id` (主键)
    *   `alert_content` (告警内容)
    *   `alert_type` (类型: danger/warning/info)
    *   `status` (状态: 0待处理 1已处理)
4.  **监控日志表 (`t_ops_monitor_log`)**
    *   `log_id` (主键)
    *   `cpu_load`, `memory_load` (负载数据)
    *   `record_time` (记录时间)

## 2. 后端开发 (遵循规则 2.1)
代码将位于 `ruoyi-system` 模块的 `com.ruoyi.system` 包下，严格遵循分层架构：

*   **实体层 (Domain)**:
    *   类名：`OpsHost`, `OpsDeployment`, `OpsAlert`, `OpsMonitorLog`
    *   **继承**: 必须继承 `BaseEntity` 以包含通用字段。
    *   位置：`com.ruoyi.system.domain`
*   **持久层 (Mapper)**:
    *   接口：`OpsHostMapper` 等
    *   位置：`com.ruoyi.system.mapper`
*   **业务层 (Service)**:
    *   接口与实现：`IOpsDashboardService` / `OpsDashboardServiceImpl` (聚合业务逻辑)
*   **表现层 (Controller)**:
    *   类名：`OpsDashboardController`
    *   位置：`com.ruoyi.web.controller.system` (或新建 `ops` 包)
    *   注解：使用 `@RestController`, `@RequestMapping("/system/ops")`

## 3. 前端对接 (遵循规则 2.2)
*   **API 封装**: `src/api/ops/dashboard.js`
*   **页面逻辑**: 更新 `src/views/index.vue`，使用 `axios` 请求后端接口，并使用真实数据渲染 ECharts 和列表。

## 实施计划
1.  **SQL 脚本执行**: 编写并执行 Python 脚本，创建符合规范的数据库表。
2.  **后端代码生成**: 手动编写符合规范的 Domain, Mapper, Service, Controller 代码。
3.  **前端联调**: 对接 API，调试页面显示。
