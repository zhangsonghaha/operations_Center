---
name: 修复数据监控页面问题
overview: 修复数据监控页面的三个问题：1. 创建缺失的监控规则表 2. 优化下方数据展示设计 3. 修复统计卡片数据为空的问题
design:
  architecture:
    framework: vue
  styleKeywords:
    - Modern
    - Clean
    - Light Theme
    - Card-based
    - Subtle Shadows
  fontSystem:
    fontFamily: PingFang SC
    heading:
      size: 28px
      weight: 700
    subheading:
      size: 16px
      weight: 600
    body:
      size: 14px
      weight: 400
  colorSystem:
    primary:
      - "#3b82f6"
      - "#10b981"
      - "#f59e0b"
      - "#ef4444"
    background:
      - "#f3f4f6"
      - "#ffffff"
    text:
      - "#1f2937"
      - "#6b7280"
      - "#9ca3af"
    functional:
      - "#3b82f6"
      - "#10b981"
      - "#f59e0b"
      - "#ef4444"
todos:
  - id: create-monitor-table
    content: 执行 SQL 创建 sys_db_monitor_rule 表及默认规则数据
    status: completed
  - id: fix-stats-cards
    content: 优化统计卡片样式，改为浅色主题确保数据清晰可读
    status: completed
  - id: optimize-tabs-design
    content: 优化标签页设计，从 border-card 改为 card 样式
    status: completed
    dependencies:
      - fix-stats-cards
---

## 用户问题

1. **监控规则报错**：点击"监控规则"标签页时报错 `Table 'ry-vue.sys_db_monitor_rule' doesn't exist`
2. **统计卡片显示为空**：总连接数、活跃连接、慢查询、总表空间四个卡片数据显示为空
3. **数据展示设计不佳**：下方标签页区域使用 border-card 样式，视觉效果不够现代

## 问题分析

1. **表缺失**：`sys_db_monitor_rule` 表未在数据库中创建，SQL 文件位于 `sql/db_monitor.sql`
2. **样式问题**：统计卡片使用深色背景但文字为白色，与整体页面风格不协调；标签页使用 border-card 样式较为过时
3. **数据获取**：后端服务 `SysDbMonitorServiceImpl` 已实现数据获取逻辑，但前端样式影响数据可读性

## 核心功能

- 创建 `sys_db_monitor_rule` 监控规则表
- 优化统计卡片样式，确保数据清晰可读
- 优化标签页区域设计，提升视觉效果

## 技术栈

- 前端：Vue 3 + Element Plus + ECharts
- 后端：Spring Boot + MyBatis
- 数据库：MySQL

## 实现方案

### 1. 数据库表创建

执行 `sql/db_monitor.sql` 文件创建 `sys_db_monitor_rule` 表及默认规则数据

### 2. 统计卡片样式优化

- 将深色卡片改为浅色卡片，使用白色背景配合彩色左边框
- 调整文字颜色为深色，确保数据清晰可读
- 添加渐变阴影和悬停效果提升视觉层次

### 3. 标签页设计优化

- 将 `border-card` 改为 `card` 样式，更加简洁现代
- 优化标签页头部样式，使用圆角和阴影
- 统一表格和内容的间距与配色

## 目录结构

```
sql/
  └── db_monitor.sql                    # [EXISTING] 包含 sys_db_monitor_rule 表结构

ruoyi-ui/src/views/system/db/monitor/
  └── index.vue                          # [MODIFY] 优化统计卡片和标签页样式
```

## 设计优化方案

### 统计卡片优化

- 背景色：从深色半透明改为纯白色
- 边框：保留左侧彩色边框（蓝/绿/橙/红）
- 文字：数值使用深色（#1f2937），标签使用灰色（#6b7280）
- 阴影：添加柔和阴影提升层次感
- 悬停：添加轻微上浮动画和阴影加深

### 标签页优化

- 类型：从 `border-card` 改为 `card` 样式
- 头部：使用白色背景，底部添加细边框分隔
- 内容区：保持白色背景，优化内边距
- 激活状态：使用主色调下划线指示

### 整体配色

- 背景：浅灰色（#f3f4f6）
- 卡片：白色（#ffffff）
- 主色调：蓝色（#3b82f6）
- 成功色：绿色（#10b981）
- 警告色：橙色（#f59e0b）
- 危险色：红色（#ef4444）
#ef4444）